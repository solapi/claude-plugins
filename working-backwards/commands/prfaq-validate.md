---
name: prfaq-validate
description: PRFAQ 문서를 검증하고 승인/반려 결과를 반환합니다.
arguments:
  - name: file_path
    description: 검증할 PRFAQ 파일 경로 (생략 시 가장 최근 Draft 상태 문서)
    required: false
---

# PRFAQ 검증

## 지시사항

PRFAQ 문서를 Amazon의 5가지 핵심 질문 기준으로 검증합니다.

### 1단계: 검증 대상 문서 확인

파일 경로가 지정된 경우:
- 해당 파일을 읽어옵니다.

파일 경로가 지정되지 않은 경우:
- `docs/working-backwards/` 디렉토리에서 가장 최근 PRFAQ 문서를 찾습니다.
- Draft 또는 In Review 상태인 문서를 우선합니다.

```bash
ls -t docs/working-backwards/PRFAQ-*.md 2>/dev/null | head -5
```

### 2단계: validator 에이전트 호출

validator 에이전트(`agents/validator.md`)를 사용하여 검증을 수행합니다.

### 3단계: 검증 체크리스트 확인

다음 항목들을 검증합니다:

#### 필수 검증 항목 (하나라도 실패 시 반려)

| 항목 | 검증 기준 |
|------|----------|
| **고객 정의** | 구체적인 고객 세그먼트/페르소나가 명시되어 있는가? "사용자", "고객" 같은 일반적 표현만 있으면 실패 |
| **문제 정의** | 고객의 구체적인 문제/고충점이 기술되어 있는가? |
| **고객 혜택** | 최소 1개 이상의 명확한 고객 혜택이 정의되어 있는가? |
| **검증 근거** | 고객이 이것을 원한다는 데이터/근거/가정이 있는가? |
| **고객 경험** | Before/After 시나리오가 있는가? |
| **성공 지표** | 측정 가능한 KPI가 최소 1개 이상 정의되어 있는가? |

#### 권장 검증 항목 (경고만 표시)

| 항목 | 검증 기준 |
|------|----------|
| Press Release 완성도 | 모든 섹션이 채워져 있는가? |
| Internal FAQ | 최소 3개 이상의 Q&A가 있는가? |
| External FAQ | 최소 3개 이상의 Q&A가 있는가? |
| 고객 여정 | 단계별 상세가 있는가? |

### 4단계: 검증 결과 판정

#### ✅ Approved (승인)
- 모든 필수 검증 항목 통과
- 문서 상태를 `Approved`로 업데이트
- 검증 이력에 기록

#### ❌ Rejected (반려)
- 필수 검증 항목 중 하나 이상 실패
- 문서 상태를 `Rejected`로 업데이트
- 구체적인 반려 사유 제시
- 개선 제안 포함

### 5단계: 결과 보고

#### 승인 시 출력 형식:

```
✅ PRFAQ 검증 결과: Approved

📄 문서: {파일 경로}
📅 검증 일시: {YYYY-MM-DD HH:mm}

검증 결과:
✅ 고객 정의: 통과
✅ 문제 정의: 통과
✅ 고객 혜택: 통과
✅ 검증 근거: 통과
✅ 고객 경험: 통과
✅ 성공 지표: 통과

⚠️ 권장 사항:
- {있는 경우 권장 개선 사항}

다음 단계:
- `/working-backwards:prd-new {기능명}` 명령으로 PRD 작성을 시작하세요.
```

#### 반려 시 출력 형식:

```
❌ PRFAQ 검증 결과: Rejected

📄 문서: {파일 경로}
📅 검증 일시: {YYYY-MM-DD HH:mm}

검증 결과:
✅ 고객 정의: 통과
❌ 문제 정의: 실패
   └─ 사유: {구체적인 실패 사유}
   └─ 개선 제안: {어떻게 수정해야 하는지}
...

반려 사유 요약:
1. {반려 사유 1}
2. {반려 사유 2}

다음 단계:
1. 위 반려 사유를 참고하여 PRFAQ를 수정하세요.
2. 수정 후 다시 `/working-backwards:prfaq-validate` 명령을 실행하세요.
```

### 6단계: 문서 업데이트

검증 결과에 따라 PRFAQ 문서를 업데이트합니다:

1. **Status** 필드 업데이트 (Draft → Approved/Rejected)
2. **Last Updated** 필드 업데이트
3. **검증 체크리스트** 체크 상태 업데이트 (⬜ → ✅/❌)
4. **검증 이력** 테이블에 새 행 추가

## 반려 기준 상세

### 고객이 불명확한 경우의 예시:
- ❌ "사용자" - 너무 일반적
- ❌ "개발자" - 어떤 개발자인지 불명확
- ✅ "Node.js를 사용하는 백엔드 개발자로, 3년 이상 경력의 스타트업 근무자"

### 문제가 불명확한 경우의 예시:
- ❌ "불편하다" - 무엇이 불편한지 불명확
- ❌ "필요하다" - 왜 필요한지 근거 없음
- ✅ "현재 인증 프로세스에서 평균 5단계를 거쳐야 하며, 이탈률이 40%에 달한다"

### 성공 지표가 없는 경우의 예시:
- ❌ "사용자가 좋아할 것" - 측정 불가
- ❌ "개선될 것" - 구체적이지 않음
- ✅ "로그인 시간 50% 단축, 이탈률 20% 감소"
